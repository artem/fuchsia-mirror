# Copyright 2023 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/components/fuchsia_package.gni")
import("//build/host.gni")
import("//build/rust/rustc_binary.gni")

test_deps = []

if (is_host) {
  rustc_test("ffx_daemon_test") {
    testonly = true
    edition = "2021"
    source_root = "src/tests.rs"

    sources = [ "src/tests.rs" ]

    deps = [
      "//src/developer/ffx/daemon:lib",
      "//src/developer/ffx/testing:ffx_testing",
      "//src/lib/fuchsia",
      "//src/lib/testing/fixture",
      "//third_party/rust_crates:futures",
      "//third_party/rust_crates:notify",
    ]
  }

  test_deps += [ ":ffx_daemon_test($host_toolchain)" ]
}

group("tests") {
  deps = test_deps
  testonly = true
}
