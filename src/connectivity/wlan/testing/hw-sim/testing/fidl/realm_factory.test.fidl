// Copyright 2023 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

library test.wlan.realm;

using fuchsia.testing.harness;
using fuchsia.io;

/// Defines the configuration of the WLAN components under test.
type WlanConfig = resource table {
    /// If true, WEP and WPA1 are supported.
    /// If not present, defaults to false.
    1: use_legacy_privacy bool;

    /// If true, the regulatory region component is used.
    /// If not present, defaults to true.
    2: with_regulatory_region bool;

    /// The name of the created realm.
    /// Note that this must be unique among all realms that may exist at one
    /// time.
    /// If not present, the name will be autogenerated.
    3: name string;
};

/// RealmOptions tells the RealmFactory protocol how to create the test realm.
type RealmOptions = resource table {
    1: devfs_server_end server_end:fuchsia.io.Directory;
    2: wlan_config WlanConfig;
};

@discoverable
closed protocol RealmFactory {
    compose fuchsia.testing.harness.RealmFactory;

    /// Specifies the options to use when creating the realm.
    ///
    /// Returns OperationError.INVALID if called more than once.
    strict SetRealmOptions(resource struct {
        options RealmOptions;
    }) -> () error fuchsia.testing.harness.OperationError;
};
