// Copyright 2022 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
{
    actions: [
        {
            type: "expect_pass",
            matchers: [
                "*",
            ],
        },
        {
            type: "expect_failure",
            matchers: [
                // Netstack3 does not support SO_REUSEADDR and only partially supports
                // SO_REUSEPORT for UDP sockets.
                "AllUDPSockets/UDPSocketPairTest.ReuseAddrDefault/*",
                "AllUDPSockets/UDPSocketPairTest.SetReuseAddr/*",
                "AllUDPSockets/UDPSocketPairTest.SetReuseAddrReusePort/*",
                "AllUDPSockets/UDPSocketPairTest.SetReusePort/*",
            ],
        },
        {
            type: "skip",
            matchers: [
                // Tests that flake in Fuchsia's CQ.
                // https://fxbug.dev/115961
                "AllInetTests/UdpSocketTest.SendToAddressOtherThanConnected/*",

                // Cases are either skipped entirely (0, 1) or fail (2)
                "AllInetTests/UdpSocketControlMessagesTest.SendAndReceiveTOSorTClass/*",

                // Tests that hang in Fuchsia's CQ due to indefinite poll for ICMP response.
                // TODO(https://fxbug.dev/47321): Implement ICMP sockets in Netstack3.
                "AllInetTests/UdpSocketTest.ConnectWriteToInvalidPort/*",
                "AllInetTests/UdpSocketTest.ConnectAndSendNoReceiver/*",
            ],
        },
        {
            type: "expect_failure",
            matchers: [
                // Fails because ZXIO disallows binding to an address with
                // family `AF_UNSPEC`.
                "AllInetTests/UdpSocketTest.DisconnectAfterBindToUnspecAndConnect/*",

                // Comment to keep this block separated from the above one.
                "AllInetTests/UdpSocketTest.FIONREADShutdown/*",
                "AllInetTests/UdpSocketTest.FIONREADWriteShutdown/*",
                "AllInetTests/UdpSocketTest.FIONREADZeroLengthPacket/*",
                "AllInetTests/UdpSocketTest.FIONREADZeroLengthWriteShutdown/*",
                "AllInetTests/UdpSocketTest.Fionread/*",
                "AllInetTests/UdpSocketTest.ReadShutdownNonblockPendingData/*",
                "AllInetTests/UdpSocketTest.RecvBufLimits/*",
                "AllInetTests/UdpSocketTest.SoNoCheck/*",
                "AllInetTests/UdpSocketTest.SoNoCheckOffByDefault/*",
                "AllInetTests/UdpSocketTest.SoTimestamp/*",
                "AllInetTests/UdpSocketTest.SoTimestampOffByDefault/*",
                "AllInetTests/UdpSocketTest.TimestampIoctl/*",
                "AllInetTests/UdpSocketTest.TimestampIoctlNothingRead/*",
                "AllInetTests/UdpSocketTest.TimestampIoctlPersistence/*",

                // Netstack3 does not support many UDP socket options or operations
                "AllUDPSockets/AllSocketPairTest.BasicRecvmmsg/*",
                "AllUDPSockets/AllSocketPairTest.BasicSendmmsg/*",
                "AllUDPSockets/AllSocketPairTest.GetSndBufSucceeds/*",
                "AllUDPSockets/AllSocketPairTest.GetSocketOutOfBandInlineOption/*",
                "AllUDPSockets/AllSocketPairTest.GetSocketRcvbufOption/*",
                "AllUDPSockets/AllSocketPairTest.KeepAliveSocketOption/*",
                "AllUDPSockets/AllSocketPairTest.LingerSocketOption/*",
                "AllUDPSockets/AllSocketPairTest.RecvmmsgInvalidTimeout/*",
                "AllUDPSockets/AllSocketPairTest.RecvmmsgTimeoutBeforeRecv/*",
                "AllUDPSockets/AllSocketPairTest.RecvmsgMsghdrFlagsCleared/*",
                "AllUDPSockets/AllSocketPairTest.SendmmsgIsLimitedByMAXIOV/*",
                "AllUDPSockets/AllSocketPairTest.RecvmsgPeekMsghdrFlagsCleared/*",
                "AllUDPSockets/AllSocketPairTest.SetAndGetBooleanSocketOptions/*",
                "AllUDPSockets/NonStreamSocketPairTest.SendMsgTooLarge/*",
                "AllUDPSockets/UDPSocketPairTest.GetSocketAcceptConn/*",
                "AllUDPSockets/UDPSocketPairTest.IPPKTINFODefault/*",
                "AllUDPSockets/UDPSocketPairTest.RecvTosDefault/*",
                "AllInetTests/UdpSocketControlMessagesTest.SendAndReceiveTTLOrHopLimit/*",
                "AllInetTests/UdpSocketControlMessagesTest.SetAndReceivePktInfo/*",
                "AllInetTests/UdpSocketControlMessagesTest.SetAndReceiveTOSOrTClass/*",
                "AllInetTests/UdpSocketControlMessagesTest.SetAndReceiveTTLOrHopLimit/*",
                "AllUDPSockets/UDPSocketPairTest.TOSRecvMismatch/*",

                // Netstack3 does not have complete support for multicast UDP sockets.
                "AllUDPSockets/UDPSocketPairTest.MulticastLoopDefault/*",
                "AllUDPSockets/UDPSocketPairTest.SetMulticastLoop/*",
                "AllUDPSockets/UDPSocketPairTest.SetMulticastLoopChar/*",
                "AllUDPSockets/UDPSocketPairTest.SetUDPMulticastTTLMin/*",
                "AllUDPSockets/UDPSocketPairTest.SetEmptyIPAddMembership/0",
                "AllUDPSockets/UDPSocketPairTest.SetEmptyIPAddMembership/2",
                "AllUDPSockets/UDPSocketPairTest.SetEmptyIPAddMembership/3",
                "AllUDPSockets/UDPSocketPairTest.SetEmptyIPAddMembership/5",

                // Uncategorized
                "AllUDPSockets/UDPSocketPairTest.ReceiveOrigDstAddrDefault/[0235]",
                "AllUDPSockets/UDPSocketPairTest.SetAndGetIPPKTINFO/*",
                "AllUDPSockets/UDPSocketPairTest.SetAndGetReceiveOrigDstAddr/[0235]",
                "AllUDPSockets/UDPSocketPairTest.SetAndGetSocketLinger/*",
                "AllUDPSockets/UDPSocketPairTest.SetRecvTos/*",

                // https://fxbug.dev/74639
                "AllUDPSockets/AllSocketPairTest.GetSetSocketRcvlowatOption/*",
            ],
        },
    ],
}
