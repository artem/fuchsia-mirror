// Copyright 2022 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
{
    actions: [
        {
            type: "expect_pass",
            matchers: [
                "*",
            ],
        },
        {
            type: "expect_failure",
            matchers: [
                // Netstack3 does not support SO_REUSEADDR and only partially supports
                // SO_REUSEPORT for UDP sockets.
                "UdpInet6SocketTest.ConnectInet4Sockaddr",
                "UdpBindTest/SendtoTest.Sendto/0",
                "UdpBindTest/SendtoTest.Sendto/3",
                "UdpBindTest/SendtoTest.Sendto/4",
                "UdpBindTest/SendtoTest.Sendto/5",
                "UdpBindTest/SendtoTest.Sendto/6",
                "UdpBindTest/SendtoTest.Sendto/8",
                "UdpBindTest/SendtoTest.Sendto/9",
            ],
        },
        {
            type: "skip",
            matchers: [
                // Tests that flake in Fuchsia's CQ.
                // https://fxbug.dev/115961
                "AllInetTests/UdpSocketTest.SendToAddressOtherThanConnected/*",

                // Cases are either skipped entirely (0, 1) or fail (2)
                "AllInetTests/UdpSocketControlMessagesTest.SendAndReceiveTOSorTClass/*",

                // Tests that hang in Fuchsia's CQ due to indefinite poll for ICMP response.
                // TODO(https://fxbug.dev/47321): Implement ICMP sockets in Netstack3.
                "AllInetTests/UdpSocketTest.ConnectWriteToInvalidPort/*",
                "AllInetTests/UdpSocketTest.ConnectAndSendNoReceiver/*",
            ],
        },
        {
            type: "expect_failure",
            matchers: [
                "AllInetTests/UdpSocketTest.ConnectToZeroPortBound/*",
                "AllInetTests/UdpSocketTest.ConnectToZeroPortConnected/*",
                "AllInetTests/UdpSocketTest.ConnectToZeroPortUnbound/*",
                "AllInetTests/UdpSocketTest.DisconnectAfterBindToAny/*",
                "AllInetTests/UdpSocketTest.DisconnectAfterBindToUnspecAndConnect/*",
                "AllInetTests/UdpSocketTest.DisconnectAfterConnectAnyWithPort/*",
                "AllInetTests/UdpSocketTest.DisconnectAfterConnectWithoutBind/*",
                "AllInetTests/UdpSocketTest.FIONREADShutdown/*",
                "AllInetTests/UdpSocketTest.FIONREADWriteShutdown/*",
                "AllInetTests/UdpSocketTest.FIONREADZeroLengthPacket/*",
                "AllInetTests/UdpSocketTest.FIONREADZeroLengthWriteShutdown/*",
                "AllInetTests/UdpSocketTest.Fionread/*",
                "AllInetTests/UdpSocketTest.ReadShutdownNonblockPendingData/*",
                "AllInetTests/UdpSocketTest.RecvBufLimits/*",
                "AllInetTests/UdpSocketTest.SoNoCheck/*",
                "AllInetTests/UdpSocketTest.SoNoCheckOffByDefault/*",
                "AllInetTests/UdpSocketTest.SoTimestamp/*",
                "AllInetTests/UdpSocketTest.SoTimestampOffByDefault/*",
                "AllInetTests/UdpSocketTest.TimestampIoctl/*",
                "AllInetTests/UdpSocketTest.TimestampIoctlNothingRead/*",
                "AllInetTests/UdpSocketTest.TimestampIoctlPersistence/*",

                // Netstack3 does not support many UDP socket options or operations
                "AllInetTests/UdpSocketControlMessagesTest.SendAndReceiveTTLOrHopLimit/*",
                "AllInetTests/UdpSocketControlMessagesTest.SetAndReceivePktInfo/*",
                "AllInetTests/UdpSocketControlMessagesTest.SetAndReceiveTOSOrTClass/*",
                "AllInetTests/UdpSocketControlMessagesTest.SetAndReceiveTTLOrHopLimit/*",
            ],
        },
    ],
}
